{% extends "base.html" %}
{% block title %}Match Result{% endblock %}
{% block content %}
<div class="match-result-page">
    <h1>Match Over</h1>
    <div class="result-card">
        <div class="result-players">
            <div class="result-player {% if cs.match_result.winner == 1 %}winner{% endif %}">
                <h3>{{ p1.username }}</h3>
                <p class="result-total">Total: {{ cs.match_result.player1_total }}</p>
                <p>Turns: {{ cs.results.player1 | join(', ') }}</p>
            </div>
            <div class="result-vs">VS</div>
            <div class="result-player {% if cs.match_result.winner == 2 %}winner{% endif %}">
                <h3>{{ p2.username }}</h3>
                <p class="result-total">Total: {{ cs.match_result.player2_total }}</p>
                <p>Turns: {{ cs.results.player2 | join(', ') }}</p>
            </div>
        </div>
        <div class="result-outcome">
            {% if cs.match_result.winner == 0 %}
                <h2>It's a Tie!</h2>
                <p>Both stakes returned ({{ match.stake }} coins each)</p>
            {% elif (cs.match_result.winner == 1 and user.id == match.player1_id) or (cs.match_result.winner == 2 and user.id == match.player2_id) %}
                <h2 class="win-text">You Won!</h2>
                <p>You earned {{ match.stake }} coins!</p>
            {% else %}
                <h2 class="lose-text">You Lost</h2>
                <p>You lost {{ match.stake }} coins.</p>
            {% endif %}
        </div>
    </div>
    <a href="/lobby" class="btn btn-primary">Back to Lobby</a>
</div>
{% endblock %}
